{{>layouts/header}}

{{#member}}
    <form class="container" id="joinForm" action="/members/update" method="post" onsubmit="return validateForm()">
        <input type="hidden" name="id" value="{{id}}">
        <div class="mb-3">
            <label class="form-label">이름</label>
            <input type="text" class="form-control" name="name" value="{{name}}" id="name">
        </div>

        <div class="mb-3">
            <label class="form-label">이메일</label>
            <input type="email" class="form-control" name="email" value="{{email}}" id="email">
        </div>

        <div class="mb-3">
            <label class="form-label">비밀번호</label>
            <input type="password" class="form-control" name="password" value="{{password}}" id="password">
        </div>

        {{#error}}
            <div class="alert alert-danger" role="alert">
                {{error}}
            </div>
        {{/error}}

        <button type="button" class="btn btn-primary" onclick="validateForm()">수정완료</button>
        <a href="/members" class="btn btn-secondary">뒤로가기</a>
    </form>
{{/member}}

<script>
    function validateForm() {
        var name = document.getElementById('name').value;
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;

        if (name === '' || email === '' || password === '') {
            alert('이름, 이메일, 비밀번호를 모두 입력해주세요.');
            return;
        }

        else if (password.trim().length < 5) {
            alert('비밀번호는 최소 5자 이상이어야 합니다.');
            return false;
        }

        document.getElementById('joinForm').submit(); // 폼 제출

        return true; // 유효성 검사 통과
    }
</script>

{{>layouts/footer}}
